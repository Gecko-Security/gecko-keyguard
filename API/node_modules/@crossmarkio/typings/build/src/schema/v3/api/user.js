"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.MountedUserSchema = void 0;
const general_1 = require("./general");
const v2_1 = require("../../v2");
const v2 = v2_1.Types.Api.Types;
class MountedUserSchema {
    mounted;
    profile;
    node;
    nodes;
    security;
    general;
    preference;
    cards;
    apps;
    contacts;
    vault;
    log;
    static migration = (oldValue) => {
        let old = oldValue;
        let activeCardId = oldValue.cards.find((card) => card.address === oldValue.general.active)?.id;
        let general = general_1.GeneralSchema.migration(oldValue.general, activeCardId);
        let nodes = oldValue.nodes
            .map((node) => {
            if (node.type !== v2_1.Types.AllNetworks.AllNodeTypes.xrpl.xls30d &&
                node.type !== v2_1.Types.AllNetworks.AllNodeTypes.xrpl.xls38d)
                return node;
        })
            .filter(Boolean);
        let node = nodes[0];
        return Object.assign({}, old, { general, node, nodes });
    };
}
exports.MountedUserSchema = MountedUserSchema;
//# sourceMappingURL=user.js.map